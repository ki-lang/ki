
use os;

global gc_stack: ?ptr;

struct GC {
	stack_ref: ptr;

	static fn init() !fail {
		let gc = GC {
			stack_ref: @ptr_of(gc_stack)
		};
		let t = os:Thread[GC].start(GC.loop, gc) !! throw fail;;
	}

	static fn loop(gc_: GC) {
		let gc = gc_;
		while true {
			os:sleep_ms(1000);
		}
	}
}
